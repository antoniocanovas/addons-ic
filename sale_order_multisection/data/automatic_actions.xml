<?xml version="1.0" encoding="utf-8" ?>
<odoo>
    <data>

        <record id="avoid_duplicated_sections" model="base.automation">
            <field name="name">=>Avoid duplicated sections</field>
            <field name="model_id" ref="sale.model_sale_order_line"/>
            <field name="state">code</field>
            <field name="code">
if (record.display_type == 'line_section') and (record.name[:1] == '$'):
  seccion = record.name.split()[0]
  lineas = env['sale.order.line'].search([('order_id','=',record.order_id.id),('display_type','=','line_section'),('section','!=',False),('id','!=',record.id)])
  for li in lineas:
    if seccion == li.section: raise Warning('Nombre de secci√≥n duplicado !!!')
            </field>
            <field name="trigger">on_create_or_write</field>
            <!--<field name="on_change_fields">state</field>-->
            <field name="filter_pre_domain">[('display_type','=','line_section')]</field>
            <field name="filter_domain">[('display_type','=','line_section')]</field>
            <field name="active" eval="True"/>
        </record>


    </data>

</odoo>