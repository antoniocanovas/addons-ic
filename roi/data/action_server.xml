<odoo>

    <record id="change_roi_lines_from_set" model="base.automation">
            <field name="name">=> Change ROI Lines from SET Lines</field>
            <field name="model_id" ref="model_roi"/>
            <field name="state">code</field>
            <field name="code">
# CODE:
record.line_ids.unlink()
for li in record.set_id.line_ids:
  newline = env['roi.line'].create({'name':li.name, 'date_init':record.date_start, 'qty':li.qty,
                'type':li.type, 'amount':li.amount, 'roi_id':record.id})


            </field>
            <field name="trigger">on_change</field>
            <field name="trigger_field_ids" eval="[(6,0, [ref('roi.field_roi__set_id')])]"/>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>
    </record>

</odoo>
