<odoo>
    <record id="update_sol_from_udo" model="base.automation">
            <field name="name">=> Update SOL from udo_line</field>
            <field name="model_id" ref="sale_udo.model_udo_line"/>
            <field name="state">code</field>
            <field name="code">
# Compute price unit of sale_order_line from udo_line when updated:
price_unit, subtotal, discount, cost = 0,0,0,0
for li in record.sale_line_id.udo_line_ids:
  subtotal += li.price_unit * li.product_uom_qty
if record.product_uom_qty != 0:
  record.sale_line_id.write({'price_unit': subtotal / record.sale_line_id.product_uom_qty, 'discount':0})

            </field>
            <field name="trigger">on_create_or_write</field>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>
        </record>
</odoo>
