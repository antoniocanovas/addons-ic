<odoo>

        <record id="create_analytic_account_per_vehicle" model="base.automation">
            <field name="name">=> Create analytic account per vehicle:</field>
            <field name="model_id" ref="model_product_template"/>
            <field name="state">code</field>
            <field name="code">
# VEHICLES ANALYTICS:
  # News or without AA:
if (record.is_vehicle) and not (record.income_analytic_account_id.id):
  aa = env['account.analytic.account'].search([('name','=',record.name)])
  if not aa.id:
    aa = env['account.analytic.account'].create({'name':record.name})
  record['income_analytic_account_id'] = aa.id
  if not record.expense_analytic_account_id.id:
    record['expense_analytic_account_id'] = aa.id
  # Renamed:
elif (record.is_vehicle) and (record.income_analytic_account_id.id) and (record.income_analytic_account_id.name != record.name):
  products_aa = env['product.template'].search([('income_analytic_account_id','=',record.income_analytic_account_id.id)])
  if len(products_aa.ids) &lt; 2:
    record.income_analytic_account_id['name'] = record.name

            </field>
            <field name="trigger">on_create_or_write</field>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>            
    </record>

        <record id="calculate_rebu_amount" model="base.automation">
            <field name="name">=> Calculate REBU amount in vehicle</field>
            <field name="model_id" ref="model_product_vehicle_estimation"/>
            <field name="state">code</field>
            <field name="code">
vehiclept = record.product_vehicle_id
rebu = 0
if record.product_id.product_tmpl_id.vehicle_is_rebu == True:
  rebu = record.amount
  vehiclept['vehicle_rebu_amount'] = rebu
            </field>
            <field name="trigger">on_create_or_write</field>
            <field name="on_change_field_ids"><field/>
            <field name="filter_pre_domain"></field>
            <field name="filter_domain"></field>
            <field name="active" eval="True"/>
    </record>

</odoo>
