<odoo>

    <record id="out_invoice_to_in" model="ir.actions.server">
            <field name="name">=>Pasar a factura compra</field>
            <field name="model_id" ref="model_account_invoice"/>
            <field name="active" eval="True"/>
            <field name="binding_model_id" ref="model_account_invoice"/>
            <field name="state">code</field>
            <field name="code">
for invoice in records:
  invoice['type'] = 'in_invoice'

  reference = env['ocr.values'].sudo().search([
      ('token', '=', invoice.ocr_transaction_id.token), ('name', '=', 'NumFactura')], limit=1)
  if reference:
      invoice['reference'] = reference.value
            </field>
        </record>

    <record id="Assign_account_id" model="ir.actions.server">
            <field name="name">=> Asignar Cuenta de proveedor/acreedor</field>
            <field name="model_id" ref="model_account_invoice"/>
            <field name="active" eval="True"/>
            <field name="binding_model_id" ref="model_account_invoice"/>
            <field name="state">code</field>
            <field name="code">
for r in records:
  if r.type in ['in_invoice','in_refund']:
    r['account_id'] = r.partner_id.property_account_payable_id.id
  else:
    raise Warning('Esta opción es sólo para facturas de proveedor.')
            </field>
    </record>

</odoo>
